<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="545" pageHeight="842" columnWidth="505" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="p_schema" class="java.lang.String"/>
	<parameter name="p_dirbase" class="java.lang.String"/>
	<parameter name="p_titulo" class="java.lang.String"/>
	<parameter name="codfacdes" class="java.lang.String"/>
	<parameter name="codfachas" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
	A.REFFAC AS FACTURA,
	A.CODCLI AS RIF,
	B.NOMPRO AS RAZON,
	B.DIRPRO AS DOMICILIO,
	A.FECFAC AS FECHA,
	B.TELPRO AS TELEFONO,
	C.DESCONPAG AS CONDICION,
	D.CANTOT AS CANTIDAD,
	D.DESART AS DESCRIPCION,
	D.TOTART AS MONTO,
	D.MONRGO AS IVA,
	A.MONFAC AS TOTALNUM,
	$P!{p_schema}.MONTOLETRAS(A.MONFAC, E.NOMMON) AS TOTALLET
FROM
	$P!{p_schema}.FAFACTUR A,
	$P!{p_schema}.FACLIENTE B,
	$P!{p_schema}.FACONPAG C,
	$P!{p_schema}.FAARTFAC D,
	$P!{p_schema}.TSDEFMON E
WHERE
	A.REFFAC >= $P{codfacdes} AND
	A.REFFAC <= $P{codfachas} AND
	A.CODCLI = B.CODPRO AND
	A.CODCONPAG = C.ID AND
	A.REFFAC = D.REFFAC AND
	A.TIPMON = E.CODMON
ORDER BY
	A.REFFAC;]]>
	</queryString>
	<field name="factura" class="java.lang.String"/>
	<field name="rif" class="java.lang.String"/>
	<field name="razon" class="java.lang.String"/>
	<field name="domicilio" class="java.lang.String"/>
	<field name="fecha" class="java.sql.Date"/>
	<field name="telefono" class="java.lang.String"/>
	<field name="condicion" class="java.lang.String"/>
	<field name="cantidad" class="java.math.BigDecimal"/>
	<field name="descripcion" class="java.lang.String"/>
	<field name="monto" class="java.math.BigDecimal"/>
	<field name="iva" class="java.math.BigDecimal"/>
	<field name="totalnum" class="java.math.BigDecimal"/>
	<field name="totallet" class="java.lang.String"/>
	<variable name="subtotal" class="java.math.BigDecimal" resetType="Group" resetGroup="factura" calculation="Sum">
		<variableExpression><![CDATA[$F{monto}]]></variableExpression>
	</variable>
	<group name="factura" isStartNewPage="true">
		<groupExpression><![CDATA[$F{factura}]]></groupExpression>
		<groupHeader>
			<band height="117">
				<textField pattern="dd/MM/yyyy h.mm a">
					<reportElement x="394" y="32" width="111" height="15"/>
					<box topPadding="2" leftPadding="2" rightPadding="0">
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement>
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="394" y="47" width="111" height="15"/>
					<box topPadding="1">
						<topPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{rif}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="116" y="32" width="203" height="31"/>
					<box>
						<topPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{domicilio}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="116" y="1" width="336" height="31"/>
					<box>
						<topPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{razon}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="30" y="63" width="66" height="31"/>
					<box>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{telefono}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="61">
				<textField pattern="#,##0.00">
					<reportElement x="405" y="0" width="100" height="15"/>
					<box topPadding="2" rightPadding="2"/>
					<textElement textAlignment="Right">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{subtotal}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00" isBlankWhenNull="true">
					<reportElement x="405" y="15" width="100" height="15"/>
					<box topPadding="2" rightPadding="2"/>
					<textElement textAlignment="Right">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{iva}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00">
					<reportElement x="405" y="30" width="100" height="15"/>
					<box topPadding="2" rightPadding="2"/>
					<textElement textAlignment="Right">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{totalnum}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="65" y="45" width="340" height="16"/>
					<box topPadding="2" leftPadding="2">
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{totallet}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="74" splitType="Stretch">
			<textField>
				<reportElement x="203" y="43" width="97" height="20"/>
				<box>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{factura}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="355" y="43" width="97" height="20"/>
				<box>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{factura}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="356" splitType="Stretch">
			<textField>
				<reportElement x="0" y="8" width="96" height="20"/>
				<box topPadding="2" leftPadding="2">
					<leftPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="96" y="8" width="309" height="20"/>
				<box topPadding="2" leftPadding="2"/>
				<textElement>
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descripcion}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="405" y="8" width="100" height="20"/>
				<box topPadding="2" leftPadding="0" rightPadding="4">
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{monto}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
